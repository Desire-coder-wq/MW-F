<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/management.css">
</head>
<body onload="checkAccess(['admin'])">
<header id="topbar"></header>
<main class="container">
  <h1>Admin Dashboard</h1>
<section class="kpi-grid" id="kpis"></section>
<section class="grid">
<a class="tile" href="add-stock.html"> Add / Update Stock</a>
<a class="tile" href="sales-entry.html"> Sales Entry</a>
<a class="tile" href="sales-report.html">Sales Report</a>
<a class="tile" href="user-management.html"> User Management</a>
</section>
</main>
<script src="assets/js/data.js"></script>
<script src="/js/auth.js"></script>
<script src="/js/ui.js"></script>
<script src="/js/dash.js"></script>
<script>
requireAuth(); renderTopbar('Dashboard');
const { products, sales } = db();
const totalProducts = products.length;
const totalStock = products.reduce((s,p)=>s+(p.quantity||0),0);
const revenue = sales.reduce((s,sl)=>s+Number(sl.total||0),0);
const k = document.getElementById('kpis');
k.innerHTML = `
<div class="kpi"><div class="kpi-num">${totalProducts}</div><div class="kpi-label">Products</div></div>
<div class="kpi"><div class="kpi-num">${totalStock}</div><div class="kpi-label">Total Units in Stock</div></div>
<div class="kpi"><div class="kpi-num">UGX ${revenue.toLocaleString()}</div><div class="kpi-label">Revenue (All-time)</div></div>
`;
</script>
  <footer>
    <div class="container">
      <p>&copy; 2025 Mayondo Wood & Furniture Ltd</p>
    </div>
  </footer>
</body>
</html> 
