doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width,initial-scale=1")
    title User List - Manager Dashboard
    link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css")
    link(rel="stylesheet", href="/css/attendant-manage.css")
    style.
      .get-all-btn {
        background: linear-gradient(135deg, #0b880b, #0a6e0a);
        color: white;
        border: none;
        border-radius: 12px;
        padding: 14px 22px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
        text-decoration: none;
        box-shadow: 0 4px 15px rgba(11, 136, 11, 0.3);
      }

      .get-all-btn:hover {
        background: linear-gradient(135deg, #0a6e0a, #095909);
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(11, 136, 11, 0.4);
      }

  body
    // ---- Sidebar ----
    aside.sidebar
      .sidebar-toggle
        i.fas.fa-bars
      .logo-container
        img.logo-img(src="/images/logo 2.png", alt="MWF Logo")
        .logo-text Mayondo Wood & Furniture
      nav
        ul
          li
            a(href="/reports")
              i.fas.fa-chart-bar
              span Reports
          li
            a(href="/approve-stock")
              i.fas.fa-check-circle
              span Approve Stock
          li
            a(href="/stock")
              i.fas.fa-boxes
              span Add Stock
          li
            a(href="/sales-report")
              i.fas.fa-chart-line
              span Sales Reports
          li
            a(href="/userList", class="active")
              i.fas.fa-users
              span Users
          li
            a(href="/logout")
              i.fas.fa-sign-out-alt
              span Logout

    // ---- Topbar ----
    #topbar
      .header-content
        .company-info
          h1 User Management
          h3 View and manage system users
        .header-actions
          button.get-all-btn(onclick="goToManagerDashboard()")
            i.fas.fa-arrow-left
            | Back to Dashboard

    // ---- Main Content ----
    .container
      .section
        h3.section-title
          i.fas.fa-users
          | Registered Users

        // ---- User Cards ----
        if user.length
          .cards-grid
            each item, i in user
              .user-card
                img.profile-img(src=item.profilePic || '/images/default-avatar.png', alt=item.name)
                .card-content
                  h4 #{item.name}
                  p
                    strong Role: 
                    | #{item.role}
                  p
                    strong Email: 
                    | #{item.email}
                  p
                    strong Phone: 
                    | #{item.phoneNumber || 'N/A'}
                  p
                    strong National ID: 
                    | #{item.nationalID || 'N/A'}
                  p
                    strong Next of Kin: 
                    | #{item.nextOfKinName || 'N/A'}
                  p
                    strong Next of Kin Phone: 
                    | #{item.nextOfKinNumber || 'N/A'}
                  .card-actions
                    a.edit-btn(href=`/user-edit/${item._id}`)
                      i.fas.fa-edit
                      | Edit
                    form.delete-form(action=`/users/${item._id}?_method=DELETE`, method="POST", onsubmit="return confirmDelete()")
                      button.delete-btn(type="submit")
                        i.fas.fa-trash
                        | Delete
        else
          p No users found.

    // ---- Footer ----
    footer
      .container
         p &copy; 2025 Mayondo Wood & Furniture Ltd 
         p Designed by A Rose Desire @ Groundbreaker Talents

    script.
      function confirmDelete() {
        return confirm("Are you sure you want to delete this user? This action cannot be undone.");
      }

      function goToManagerDashboard() {
        window.location.href = '/manager-dashboard';
      }