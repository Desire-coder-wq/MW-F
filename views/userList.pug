doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1")
    title MWF — User List
    link(rel="stylesheet", href="/css/sales-report.css")
    link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css")

  body
    // ---- Sidebar ----
    aside.sidebar
      .logo-container
        img.logo-img(src="/images/logo 2.png", alt="MWF Logo", onerror="this.style.display='none'")
        h2.logo-text Mayondo Wood & Furniture
      nav
        ul
          li
            a(href="/dashboard")
              i.fas.fa-tachometer-alt
              span Dashboard
          li
            a(href="/sales-entry")
              i.fas.fa-cash-register
              span Sales Entry
          li
            a(href="/receipt")
              i.fas.fa-receipt
              span Receipt
          li
            a(href="/sales-report")
              i.fas.fa-chart-line
              span Sales Report
          li
            a(href="/stock-report")
              i.fas.fa-chart-bar
              span Stock Report
          li
            a(href="/stockList")
              i.fas.fa-boxes
              span Stock List
          li
            a(href="/userList", class="active")
              i.fas.fa-users
              span User List
          li
            a(href="/logout")
              i.fas.fa-sign-out-alt
              span Logout

    // ---- Header ----
    header#topbar
      .header-content
        .company-info
          h1 Mayondo Wood & Furniture Ltd
          h3 User Management
        .header-actions
          button.notification-btn
            i.fas.fa-bell
            span.notification-count 3
          .user-profile
            i.fas.fa-user-circle
            span Admin

    // ---- Main Content ----
    main.container
      .section
        .table-header
          h3
            i.fas.fa-users
            | User List

        .report-table
          table#userTable
            thead
              tr
                th 
                  i.fas.fa-hashtag
                  | #
                th 
                  i.fas.fa-image
                  | Profile
                th 
                  i.fas.fa-user
                  | Name
                th 
                  i.fas.fa-envelope
                  | Email
                th 
                  i.fas.fa-user-tag
                  | Role
                th 
                  i.fas.fa-venus-mars
                  | Gender
                th 
                  i.fas.fa-phone
                  | Phone
                th 
                  i.fas.fa-id-card
                  | National ID
                th 
                  i.fas.fa-user-friends
                  | Next of Kin
                th 
                  i.fas.fa-mobile-alt
                  | Next of Kin Phone
                th 
                  i.fas.fa-cogs
                  | Actions
            tbody
              if user.length
                each item, i in user
                  tr
                    td #{i + 1}
                    td
                      img(
                        src=item.profilePic || '/images/default-avatar.png',
                        alt="Profile",
                        width="50",
                        height="50",
                        style="border-radius:50%"
                      )
                    td #{item.name}
                    td #{item.email}
                    td #{item.role}
                    td #{item.gender || 'N/A'}
                    td #{item.phoneNumber || 'N/A'}
                    td #{item.nationalID || 'N/A'}
                    td #{item.nextOfKinName || 'N/A'}
                    td #{item.nextOfKinPhone || 'N/A'}
                    td.actions-cell
                      a.edit-btn(href=`/user-edit/${item._id}`)
                        i.fas.fa-edit
                        | Edit
                      form.delete-form(
                        action=`/users/${item._id}?_method=DELETE`,
                        method="POST",
                        onsubmit="return confirmDelete()"
                      )
                        button.delete-btn(type="submit")
                          i.fas.fa-trash
                          | Delete
              else
                tr
                  td(colspan="11") No users found.

    // ---- Footer ----
    footer
      .container
        p © 2025 Mayondo Wood & Furniture Ltd

    script.
      function confirmDelete() {
        return confirm("Are you sure you want to delete this user? This action cannot be undone.");
      }