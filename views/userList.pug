doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1")
    title MWF â€” User List
    link(rel="stylesheet", href="/css/userList.css")

  body
    .layout
      // ======================
      // Sidebar Navigation
      // ======================
      aside.sidebar
        h2.logo MWF
        ul
          li: a(href="/dashboard") Dashboard
          li: a(href="/sales-entry") Sales Entry
          li: a(href="/receipt") Receipt
          li: a(href="/sales-report") Sales Report
          li: a(href="/stock-report") Stock Report
          li: a(href="/stockList") Stock List
          li: a(href="/userList", class="active") User List
          li: a(href="/logout", class="logout-btn") Logout

      // ======================
      // Main Content
      // ======================
      .main-content
        header#topbar
          h1 User List

        main.container
          table#userTable.table
            thead
              tr
                th #
                th Profile
                th Name
                th Email
                th Role
                th Gender
                th Phone
                th National ID
                th Next of Kin
                th Next of Kin Phone
                th Actions
            tbody
              if user.length
                each item, i in user
                  tr
                    td #{i + 1}
                    td
                      img(
                        src=item.profilePic || '/images/default-avatar.png',
                        alt="Profile",
                        width="50",
                        height="50",
                        style="border-radius:50%"
                      )
                    td #{item.name}
                    td #{item.email}
                    td #{item.role}
                    td #{item.gender || 'N/A'}
                    td #{item.phoneNumber || 'N/A'}
                    td #{item.nationalID || 'N/A'}
                    td #{item.nextOfKinName || 'N/A'}
                    td #{item.nextOfKinPhone || 'N/A'}
                    td
                      a(href=`/user-edit/${item._id}`) Edit
                      form(
                        action=`/users/${item._id}?_method=DELETE`,
                        method="POST",
                        style="display:inline",
                        onsubmit="return confirmDelete()"
                      )
                        button(type="submit") Delete
              else
                tr
                  td(colspan="11") No users found.

    // ======================
    // Footer
    // ======================
    footer
      .container
        p &copy; 2025 Mayondo Wood & Furniture Ltd

    // ======================
    // Scripts
    // ======================
    script.
      requireAuth();
      renderTopbar("User List");

    script.
      function confirmDelete() {
        return confirm("Are you sure you want to delete this user? This action cannot be undone.");
      }
