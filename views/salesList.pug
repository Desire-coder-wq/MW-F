doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1")
    title Sales List â€” MWF
    link(rel="stylesheet", href="/css/attendant-manage.css")

  body
    .layout
      // Sidebar
      aside.sidebar
        h2.logo Dashboard
        nav
          ul
            li
              a(href="/dashboard") Dashboard
            li
              a(href="/sales") Sales Entry
            li
              a(href="/sales-list", class="active") Sales List
            li
              a(href="/sales-report") Sales Report
            li
              a(href="/stock-report") Stock Report
            li
              a(href="/stock-list") Stock List
            li
              a(href="/logout") Logout

      // Main content
      main.main-content
        header
          h1 Sales List
          p View and manage all sales records in the system.

        section.table-section
          table.sales-table
            thead
              tr
                th #
                th Customer Name
                th Product Name
                th Quantity
                th Price
                th Transport
                th Total
                th Payment Type
                th Date
                th Sales Agent
                th Actions
            tbody
              if sales.length
                each sale, i in sales
                  tr
                    td #{i + 1}
                    td #{sale.customerName}
                    td #{sale.productName}
                    td #{sale.quantity}
                    td #{sale.price}
                    td #{sale.transport ? "Yes (5%)" : "No"}
                    td #{sale.total ? sale.total.toLocaleString() : '0'}
                    td #{sale.paymentType}
                    td #{new Date(sale.date).toLocaleDateString()}
                    td #{sale.salesAgent ? sale.salesAgent.name : "Unknown"}
                    td
                      // Actions
                      a(href=`/receipt/${sale._id}`) View Receipt
                      if user && user.role == 'manager'
                        a.btn-edit(href=`/sales/edit/${sale._id}`) Edit
                        form(method="POST", action=`/sales/delete/${sale._id}`, style="display:inline;")
                          button.btn-delete(type="submit") Delete
              else
                tr
                  td(colspan="11", style="text-align:center;") No sales recorded yet.

    footer
      .container
        p &copy; 2025 Mayondo Wood & Furniture Ltd

    script.
      // Optional: Auth & topbar scripts
      requireAuth();
      renderTopbar("Sales List");
